# 1ì°¨ ì„¸ë¯¸ë‚˜ _ ê¸°ë³¸ê³¼ì œ 2 & ì„±ì¥ê³¼ì œ 2

ğŸ“Œ **íšŒì›ê°€ì… ë° ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°**

íšŒì›ê°€ì… ì™„ë£Œì‹œ LoginActivityë¡œ ëŒì•„ì˜¤ê³ , íšŒì›ê°€ì… ì„±ê³µí•œ idì™€ pwê°€ ì…ë ¥ë˜ì–´ ìˆë„ë¡ êµ¬í˜„

ğŸ“Œ **ìë™ ë¡œê·¸ì¸ êµ¬í˜„í•˜ê¸°**

íšŒì›ê°€ì…ì‹œ LoginActivityë¡œ ëŒì•„ì™€ ê°€ì…í•œ id,pwë¡œ ìë™ ë¡œê·¸ì¸ í•˜ê¸°,

ë¡œê·¸ì¸ í•˜ì—¬ MainActivityë¡œ ê°„ ê²½ìš° ì•±ì„ ì¢…ë£Œí–ˆë‹¤ê°€ ë‹¤ì‹œ ì¼œë©´ LoginActivityì—ì„œ ìë™ ë¡œê·¸ì¸ í•˜ê¸°



## ğŸ‘©ğŸ»â€ğŸ’»**ì™„ì„±í™”ë©´**ğŸ‘©ğŸ»â€ğŸ’»

â¡ï¸**ë¡œê·¸ì¸í™”ë©´**



<img src="https://user-images.githubusercontent.com/45454585/80071068-f91ca900-857e-11ea-99eb-14037735ee8c.png" alt="1_3semina" width="40%" />



â¡ï¸**íšŒì›ê°€ì… í™”ë©´**

<img src="https://user-images.githubusercontent.com/45454585/80071072-fae66c80-857e-11ea-8d59-f8454db297b2.png" alt="1_4semina" width="40%" />



â¡ï¸**ë©”ì¸ í™”ë©´**



<img src="https://user-images.githubusercontent.com/45454585/80071062-f752e580-857e-11ea-8ab8-fa6e0503d00a.png" alt="1_2semina" width="40%" />





## ğŸ‘©ğŸ»â€ğŸ’»**êµ¬í˜„ë°©ì‹**ğŸ‘©ğŸ»â€ğŸ’»

â¡ï¸  **í™”ë©´ ì „í™˜**

â€‹	**Intentë€?**

â€‹	ì¼ì¢…ì˜ ë©”ì‹œì§€ ê°ì²´ ë¡œì„œ, Intentë¥¼ ì´ìš©í•´ Activityì˜ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹œì‘í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ê°€ì§€ ì´ë‹¤.

â€‹	ìš°ì„  Activityì˜ ìƒˆ ì¸ìŠ¤í„´ìŠ¤(ë‹¤ë¥¸ ì•¡í‹°ë¹„í‹° ì‹œì‘)ë¥¼ í•˜ë ¤ë©´ Intentë¥¼ ***startActivity()*** ë¡œ ì „ë‹¬í•´ì•¼í•œë‹¤.

â€‹	ìƒˆ ì¸ìŠ¤í„´ìŠ¤ì— **ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ë ¤ë©´**  ***putExtra()*** ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ë©´ ëœë‹¤.

â€‹	ë˜í•œ ì´ì „ Activityë¡œ ëŒì•„ì™€ì„œ ìˆ˜í–‰ ê²°ê³¼ ë°›ìœ¼ë ¤ë©´ ***startActivityForResult(intent,CODE)*** ë¥¼ ì´ìš©í•˜ì—¬ 	ë‹¤ë¥¸ ì•¡í‹°ë¹„í‹°ë¥¼ ì‹œì‘í•˜ê³  ***setResult()*** ë¥¼ í†µí•´ ìƒˆ Intentë‚˜ ë„˜ì–´ì˜¨ Intentë¥¼ ë„˜ê²¨ì¤˜ì•¼í•œë‹¤. 

â€‹	ê²°ê³¼ ë°›ì„ ì´ì „ Activityì—ì„œëŠ” ***onActivityResult()*** ë©”ì„œë“œë¥¼ overriding í•˜ì—¬ ê²°ê³¼ë¥¼ ì²˜ë¦¬í•œë‹¤.



### StartActivity() ë¥¼ ì´ìš©í•œ Activityì˜ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

âœ”ï¸ ì „ë‹¬í•˜ëŠ” ì•¡í‹°ë¹„í‹°

~~~kotlin
// intent ìƒì„± Intent(context-> Activityì¼ì‹œ this, ì „í™˜ë  Activityëª…::class.java)
val intent = Intent(this,ìƒˆë¡œì‹œì‘ í•  Activityëª…::class.java) 
            
// 'nameText'ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ nameì„ intentë¡œ ì „ë‹¬
// intent.putExtra(key, value)
intent.putExtra("nameText",name)

startActivity(intent)
~~~



âœ”ï¸ ì „ë‹¬ë°›ëŠ” ì•¡í‹°ë¹„í‹°

~~~kotlin
//ë§Œì•½ ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤ë©´
val str = intent.getStringExtra(keyëª…)
~~~



### StartActivityForResult() ë¥¼ ì´ìš©í•œ Activityì˜ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

âœ”ï¸ ì „ë‹¬í•˜ëŠ” ì•¡í‹°ë¹„í‹°

~~~kotlin
// intent ìƒì„± Intent(context-> Activityì¼ì‹œ this, ì „í™˜ë  Activityëª…::class.java)
val intent = Intent(this,ìƒˆë¡œì‹œì‘ í•  Activityëª…::class.java) 
            
// 'nameText'ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ nameì„ intentë¡œ ì „ë‹¬
// intent.putExtra(key, value)
intent.putExtra("nameText",name)

startActivityForResult(intent, ìš”ì²­ì½”ë“œ(Int))



//setResult()ë¥¼ í†µí•´ ë„˜ì–´ì˜¨ ê²°ê³¼ ê°’ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë©”ì†Œë“œ
override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
        super.onActivityResult(requestCode, resultCode, data)
        if (resultCode == Activity.RESULT_OK) {
            if (requestCode == CODE) {
               
              ...
              
            }
        }
    }
~~~



âœ”ï¸ ì „ë‹¬ë°›ëŠ” ì•¡í‹°ë¹„í‹°

~~~kotlin
//ë§Œì•½ ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤ë©´
val str = intent.getStringExtra(keyëª…)

//ex) setResult(Activity.RESULT_OK,intent)
setResult(ê²°ê³¼ì½”ë“œ, ì „ë‹¬í•  intent)

~~~







### í™”ë©´ ì „í™˜ êµ¬í˜„

âœ”ï¸ LoginActivityì—ì„œ 'íšŒì›ê°€ì…'ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ íšŒì›ê°€ì… RegisterActivityë¡œ ì´ë™

**startActivity(intent)** ë¥¼ ì´ìš©í•˜ì—¬ íšŒì›ê°€ì… ë²„íŠ¼ í´ë¦­ì‹œ RegisterActivityë¡œ ì´ë™ì‹œì¼œì¤€ë‹¤.

~~~kotlin
  tv_register_btn.setOnClickListener {
         val intent = Intent(applicationContext, RegisterActivity::class.java)
            startActivity(intent)
            finish()
        }
~~~



âœ”ï¸RegisterActivity ì—ì„œ intentë¡œ id,pw data ì „ë‹¬ ë° LoginActivityë¡œ í™”ë©´ ì´ë™

~~~kotlin
//Register Activity 
val intent = Intent(applicationContext, LoginActivity::class.java)
		intent.putExtra("id",edit_email_register.text.toString())
		intent.putExtra("pw",edit_pw_register.text.toString())
		startActivityForResult(intent,CODE)


  override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
        super.onActivityResult(requestCode, resultCode, data)
        if (resultCode== Activity.RESULT_OK)
        {
            if(requestCode==CODE)
            {
                finish()
            }
        }

    }
~~~

~~~kotlin
//Login Activity
        edit_id.setText(intent.getStringExtra("id")?.toString())
        edit_pw.setText(intent.getStringExtra("pw")?.toString())
        setResult(Activity.RESULT_OK,intent)

~~~



â¡ï¸ **Toastë„ìš°ê¸°**

~~~kotlin
Toast.makeText(context(Activityì¼ì‹œ this ë˜ëŠ” applicationContext),
               "Toastì— ë„ìš¸ ë‚´ìš©",Toast.LENGTH_SHORT).show()

~~~



â¡ï¸  **ìë™ ë¡œê·¸ì¸ ê¸°ëŠ¥**





## ğŸ‘©ğŸ»â€ğŸ’»**ì½”ë“œ**ğŸ‘©ğŸ»â€ğŸ’»

â¡ï¸ **LoginActivity.kt ì½”ë“œ**

~~~kotlin
package com.example.sopt_semina_assignment

import android.app.Activity
import android.content.Context
import android.content.Intent
import android.content.SharedPreferences
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.preference.PreferenceManager
import android.util.Log
import android.widget.Toast
import kotlinx.android.synthetic.main.activity_login.*


class LoginActivity : AppCompatActivity() {
    val CODE=1000
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_login)

        init()
    }
    fun init()
    {   var pref : SharedPreferences = getSharedPreferences("pref",Context.MODE_PRIVATE)
        var editor : SharedPreferences.Editor = pref.edit()


        edit_id.setText(intent.getStringExtra("id")?.toString())
        edit_pw.setText(intent.getStringExtra("pw")?.toString())
        setResult(Activity.RESULT_OK,intent)

        autoLogin()


        btn_login.setOnClickListener {
            if(edit_id.text.isNullOrBlank() || edit_pw.text.isNullOrBlank())
            {
                Toast.makeText(this, "ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”", Toast.LENGTH_SHORT).show();
            }
            else
            {
                editor.putString("id",edit_id.toString())
                editor.putString("pw",edit_pw.toString())
                editor.commit()
                val intent = Intent(applicationContext, MainActivity::class.java)
                startActivityForResult(intent,CODE)
            }

        }
        tv_register_btn.setOnClickListener {
            val intent = Intent(applicationContext, RegisterActivity::class.java)
            startActivityForResult(intent,CODE)
            finish()
        }
    }
    fun autoLogin()
    {
        var pref : SharedPreferences = getSharedPreferences("pref",Context.MODE_PRIVATE)
        var editor : SharedPreferences.Editor = pref.edit()
        if(!(pref.getString("id",null).isNullOrBlank() || pref.getString("pw",null).isNullOrBlank()))
        {
            val id = pref.getString("id",null).toString()
            if(!id.isNullOrBlank())
            {
                Log.d("ìë™ë¡œê·¸ì¸ id ", "${id}")
                Toast.makeText(this, "${id}ë‹˜ ìë™ë¡œê·¸ì¸ ë˜ì—ˆìŠµë‹ˆë‹¤.", Toast.LENGTH_SHORT).show();
                val intent = Intent(applicationContext, MainActivity::class.java)
                startActivityForResult(intent,CODE)
            }
        }

    }


override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
        super.onActivityResult(requestCode, resultCode, data)
        if (resultCode == Activity.RESULT_OK) {
            if (requestCode == CODE) {
                Log.d("ë¡œê·¸ì¸", "ì¢…ë£Œ")
                finish()
            }
        }
    }
}


~~~



â¡ï¸ **RegisterActivity.kt ì½”ë“œ**

~~~kotlin
package com.example.sopt_semina_assignment

import android.app.Activity
import android.content.Context
import android.content.Intent
import android.content.SharedPreferences
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.util.Log
import android.widget.Toast
import kotlinx.android.synthetic.main.activity_login.*
import kotlinx.android.synthetic.main.activity_register.*

class RegisterActivity : AppCompatActivity() {

    val CODE =100
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_register)

        init()
    }
   
  fun init()
    {
        var pref :SharedPreferences = getSharedPreferences("pref", Context.MODE_PRIVATE)
        var editor : SharedPreferences.Editor = pref.edit()
        btn_register.setOnClickListener {
            if(edit_pw_register.text.isNullOrBlank() || edit_email_register.text.isNullOrBlank())
            {
                Toast.makeText(this, "ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”", Toast.LENGTH_SHORT).show();
            }
            else{
                if(edit_pw_register.text.toString().equals(edit_pwcheck_register.text.toString()))
                {
                    Toast.makeText(this, "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.", Toast.LENGTH_SHORT).show();
                    val intent = Intent(applicationContext, LoginActivity::class.java)
                    editor.putString("id",edit_email_register.text.toString())
                    editor.putString("pw",edit_pw_register.text.toString())
                    editor.commit()
                    intent.putExtra("id",edit_email_register.text.toString())
                    intent.putExtra("pw",edit_pw_register.text.toString())
                    startActivityForResult(intent,CODE)
                }
                else
                {
                    Toast.makeText(this, "ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”", Toast.LENGTH_SHORT).show();
                }

            }
        }
    }

    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
        super.onActivityResult(requestCode, resultCode, data)
        if (resultCode== Activity.RESULT_OK)
        {
            if(requestCode==CODE)
            {
                finish()
            }
        }
    }
}

~~~



â¡ï¸ **MainActivity ì½”ë“œ**

~~~kotlin
package com.example.sopt_semina_assignment

import android.app.Activity
import android.content.Context
import android.content.SharedPreferences
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.widget.Toast
import kotlinx.android.synthetic.main.activity_main.*

private val lastTimeBackPressed : Long = System.currentTimeMillis()

class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        var pref : SharedPreferences = getSharedPreferences("pref", Context.MODE_PRIVATE)
        if(!pref.getString("id",null).toString().isNullOrBlank())
        {
            tv_id_main.text = "ì•„ì´ë”” : "+pref.getString("id",null).toString()
            tv_pw_main.text = "ë¹„ë°€ë²ˆí˜¸ : "+pref.getString("pw",null).toString()
        }

        setResult(Activity.RESULT_OK,intent)

    }

    override fun onBackPressed() {
        if(System.currentTimeMillis()- lastTimeBackPressed<1500)
        {
            finish()
            return
        }
        Toast.makeText(this, "'ë’¤ë¡œ' ë²„íŠ¼ì„ í•œ ë²ˆ ë” ëˆŒëŸ¬ ì¢…ë£Œí•©ë‹ˆë‹¤.",Toast.LENGTH_SHORT).show()
        super.onBackPressed()
    }
}
~~~

